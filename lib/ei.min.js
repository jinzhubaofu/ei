/*! 2016 Baidu Inc. All Rights Reserved */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react"),require("react-redux"),require("redux")):"function"==typeof define&&define.amd?define(["react","react-redux","redux"],e):"object"==typeof exports?exports.ei=e(require("react"),require("react-redux"),require("redux")):t.ei=e(t.React,t["react-redux"],t.redux)}(this,function(t,e,n){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(14)},function(t,e,n){var r,o,i;!function(n,s){o=[e],r=s,i="function"==typeof r?r.apply(e,o):r,!(void 0!==i&&(t.exports=i))}(this,function(t){"use strict";var e="ei/INIT";t.INIT=e,t.init=function(t){return{type:e,payload:t}};var n="ei/REPLACE";t.REPLACE=n,t.replace=function(t){return{type:n,payload:t}}})},function(t,e,n){var r,o,i;!function(s,u){o=[t,n(6)],r=u,i="function"==typeof r?r.apply(e,o):r,!(void 0!==i&&(t.exports=i))}(this,function(t,e){"use strict";var n={};t.exports=e.enable(n)})},function(t,e,n){var r,o,i;!function(n,s){o=[t],r=s,i="function"==typeof r?r.apply(e,o):r,!(void 0!==i&&(t.exports=i))}(this,function(t){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=Object.prototype.hasOwnProperty;t.exports=Object.assign||function(t){if(null==t)throw new Error("assign target cannot be null");for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];for(var s=0,u=o.length;s<u;++s){var a=o[s];if("object"===("undefined"==typeof a?"undefined":e(a)))for(var c in a)n.call(a,c)&&(t[c]=a[c])}return t}})},function(t,e,n){var r,o,i;!function(n,s){o=[t],r=s,i="function"==typeof r?r.apply(e,o):r,!(void 0!==i&&(t.exports=i))}(this,function(t){"use strict";t.exports=function(){return Math.random().toString(36).substr(2,12)}})},function(t,e,n){var r,o,i;!function(n,s){o=[t],r=s,i="function"==typeof r?r.apply(e,o):r,!(void 0!==i&&(t.exports=i))}(this,function(t){"use strict";function e(){this.boundCallbacks={},this.singletonCallbacks={},this.instantiatedSingletons={},this.registeredObjects={}}e.prototype.make=function(t){if(this.registeredObjects[t])return this.registeredObjects[t];if(this.singletonCallbacks[t]){var e=this.instantiatedSingletons,n=e[t];return n||(n=e[t]=this.singletonCallbacks[t].apply(this,arguments)),n}var r=this.boundCallbacks[t];return r?r.apply(this,arguments):null},e.prototype.bind=function(t,e){return this.boundCallbacks[t]=e,this},e.prototype.singleton=function(t,e){return this.singletonCallbacks[t]=e,this},e.prototype.register=function(t,e){return this.registeredObjects[t]=e,this},t.exports=e})},function(t,e,n){var r,o,i;!function(s,u){o=[t,n(3)],r=u,i="function"==typeof r?r.apply(e,o):r,!(void 0!==i&&(t.exports=i))}(this,function(t,e){"use strict";function n(){}var r="__listeners__",o="__event__",i={on:function(t,e){var n=this[r];n||(n=this[r]={});var o=n[t];return o||(o=n[t]=[]),o.push(e),this},off:function(t,e){var n=this[r];if(!n)return this;if(!t)return this.destroyEvents();var o=n[t];if(!o||!o.length)return this;if(!e)return o.length=0,n[t]=[],this;for(var i=o.length-1;i>=0;--i)if(o[i]===e)return o.splice(i,1),this;return this},once:function(t,e){function n(){r.off(t,n);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return e.apply(r,i)}var r=this;return r.on(t,n),this},emit:function(t){var e=this[r];if(!e)return this;var n=[].concat(e[t]||[],e["*"]||[]);if(!n.length)return this;this[o]=t;for(var i=arguments.length,s=Array(i>1?i-1:0),u=1;u<i;u++)s[u-1]=arguments[u];for(var a=0,c=n.length;a<c;++a)n[a].apply(this,s);return this[o]=null,this},getCurrentEvent:function(){return this[o]},destroyEvents:function(){var t=this[r];if(t){for(var e in t)t[e]&&(t[e].length=0,t[e]=null);this[r]=null}return this}};e(n.prototype,i),n.enable=function(t){return"function"==typeof t&&(t=t.prototype),e(t,i)},t.exports=n})},function(t,e,n){var r,o,i;!function(n,s){o=[t],r=s,i="function"==typeof r?r.apply(e,o):r,!(void 0!==i&&(t.exports=i))}(this,function(t){"use strict";function e(t,e,n,r,o,i,s,u){if(!t){if(!e)throw new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");var a=[n,r,o,i,s,u],c=0,p="Invariant Violation: "+e.replace(/%s/g,function(){return a[c++]});throw new Error(p)}}t.exports=e})},function(e,n){e.exports=t},function(t,e,n){var r,o,i;!function(s,u){o=[t,n(7),n(2),n(11),n(13),n(3),n(17)],r=u,i="function"==typeof r?r.apply(e,o):r,!(void 0!==i&&(t.exports=i))}(this,function(t,e,r,o,i,s,u){"use strict";function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(t,"App need options"),e(t.routes||t.router,"App need routes/router"),s(this,t),this.router=this.router||new o(this.routes)}a.prototype.execute=function(t,n){e(i.isServer,"App.execute() must run on server"),r.emit("app-request");var o=this.route(t);return o?this.loadPage(o.page).then(function(e){var i=new e;return Promise.resolve(i.getInitialState(t)).then(function(t){return n?(r.emit("app-response-in-json"),{state:t,route:o}):(r.emit("app-response-in-html"),i.init(t),r.emit("app-page-bootstrap"),r.emit("app-page-entered"),{page:i,route:o})})}).catch(function(t){throw r.emit("app-execute-error",t),t}):Promise.reject({status:404})},a.prototype.setBasePath=function(t){return this.basePath=t,this},a.prototype.loadPage=function(t){var e=this;if("function"==typeof t)return Promise.resolve(t);var n=this.pool;if(n&&n[t])return r.emit("app-page-loaded"),Promise.resolve(n[t]);var o=i.isServer?"resolveServerModule":"resolveClientModule";return this[o](t).then(function(t){return e.resolvePage(t)})},a.prototype.resolvePage=function(t){return"function"==typeof t?t:t.default},a.prototype.resolveServerModule=function(t){var o=this;r.emit("app-load-page-on-server",t);var i=this.basePath;e(i,"ei need a basePath to resolve your page");var s=i+"/"+t;return new Promise(function(e,r){try{var i=n(20)(s),u=o.pool;u||(u=o.pool={}),u[t]=i,e(i)}catch(t){r(t)}})},a.prototype.resolveClientModule=function(t){return r.emit("app-load-page-on-client"),t?new Promise(function(e,n){window.require([t],function(t){e(t)})}):Promise.reject(new Error("need page module id"))},a.prototype.route=function(t){r.emit("app-route");var e=this.router.route(t);return e?r.emit("app-route-succeed"):r.emit("app-route-failed",t),e},a.Component=u(a),t.exports=a})},function(t,e,n){var r,o,i;!function(s,u){o=[t,n(3),n(8),n(1),n(21),n(22),n(7),n(4),n(2),n(1),n(6),n(12),n(15),n(18)],r=u,i="function"==typeof r?r.apply(e,o):r,!(void 0!==i&&(t.exports=i))}(this,function(t,e,n,r,o,i,s,u,a,c,p,f,l,h){"use strict";function d(t){this.initialize(t)}var v=r.REPLACE,y=r.replace,g=o.Provider,m=i.createStore,x=i.applyMiddleware,b=i.combineReducers,P=i.compose,E=c.init;d.prototype={constructor:d,initialize:function(t){var e=this;this.id=u();var n="function"==typeof this.reducer?this.reducer:b(this.reducer),r=P;this.context=m(function(t,e){return e.type===v?e.payload:n(t,e)},t,r(x.apply(void 0,this.middlewares.map(function(t){return t(e)}))))},middlewares:[l],init:function(t){return this.dispatch(E(t)),this},createElement:function(t){var e=this.context,r=this.view;return n.createElement(g,{store:e},n.createElement(r,t))},getState:function(){return this.context.getState()},setState:function(t){return this.context.dispatch(y(t)),this},dispatch:function(t){return a.emit("page-dispatch",t),this.emit("dispatch",t),this.context.dispatch(t),t},getInitialState:function(t){return{}},dispose:function(){return a.emit("page-dispose"),this.emit("dispose"),this}},p.enable(d),d.extend=function(t){function n(t){d.call(this,t)}return s(t,"create Page need options"),s(t.reducer,"Pager must have a reducer"),s(t.view,"Pager must have a view"),n.Component=h(n),e(n.prototype,d.prototype,t),n},d.Component=f,t.exports=d})},function(t,e,n){var r,o,i;!function(n,s){o=[t],r=s,i="function"==typeof r?r.apply(e,o):r,!(void 0!==i&&(t.exports=i))}(this,function(t){"use strict";function e(t){this.routes=t||[]}e.prototype.route=function(t){for(var e=this.routes.length-1;e>=0;e--){var n=this.routes[e];if(n.path===t.pathname)return n}},e.prototype.addRoute=function(t){return this.routes.push(t),this},t.exports=e})},function(t,e,n){var r,o,i;!function(s,u){o=[t,n(8),n(4)],r=u,i="function"==typeof r?r.apply(e,o):r,!(void 0!==i&&(t.exports=i))}(this,function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i="ASYNC_PAGE_LOAD_ATTR",s=e.createClass({displayName:"Page",getInitialState:function(){return{pendding:!1,ready:!1,error:null}},componentDidMount:function(){var t=this.props,e=t.initialState,n=t.request;this.renderPage(n,e)},componentWillReceiveProps:function(t){var e=this.props.request||{},n=e.pathname,r=e.search,o=t.request;e===o||n===o.pathname&&r===o.search||this.renderPage(o,null)},renderPage:function(t,e){var r=this,o=this.context.route(t);if(!o)return void this.setState({ready:!1,error:{status:404,message:"啊哦，这个页面迷失在了茫茫宇宙中。。。"},pendding:!1,Page:null});this.setState({pendding:!0,error:null,ready:!1});var s=this[i]=n();this.context.loadPage(o.page).then(function(t){s===r[i]&&r.setState({Page:t,error:null,pendding:!1,ready:!0})}).catch(function(t){s===r[i]&&r.setState({error:t,ready:!1,pendding:!1,Page:null})})},onRedirect:function t(e){var t=this.props.onRedirect;return t?void t(e):void this.renderPage(e.payload.location)},render:function(){var t=this.props,n=t.request,i=t.renderLoadingMessage,s=t.renderErrorMessage,u=r(t,["request","renderLoadingMessage","renderErrorMessage"]),a=this.state,c=a.ready,p=a.pendding,f=a.Page,l=a.error,h="blank",d=null;if(null!=n)if(l)d=s(l),h="error";else if(p)d=i(),h="pendding";else if(c)try{d=e.createElement(f.Component,o({},u,{renderLoadingMessage:i,renderErrorMessage:s,onRedirect:this.onRedirect,request:n})),h="ready"}catch(t){d=s(t),h="error"}return e.createElement("div",{className:"ui-page state-"+h},d)}}),u=e.PropTypes;s.contextTypes={route:u.func,loadPage:u.func},s.propTypes={request:u.shape({pathname:u.string.isRequired,query:u.object,search:u.string}),initialState:u.any,renderLoadingMessage:u.func,renderErrorMessage:u.func},s.defaultProps={renderErrorMessage:function(t){return e.createElement("span",null,t.message)},renderLoadingMessage:function(){return e.createElement("span",null,"loading...")}},t.exports=s})},function(t,e,n){var r,o,i;(function(n){!function(n,s){o=[e],r=s,i="function"==typeof r?r.apply(e,o):r,!(void 0!==i&&(t.exports=i))}(this,function(t){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};try{t.isServer="object"===("undefined"==typeof n?"undefined":e(n))&&"[object process]"===Object.prototype.toString.call(n)}catch(t){}t.isClient=!t.isServer})}).call(e,n(19))},function(t,e,n){var r,o,i;!function(s,u){o=[t,n(9),n(10),n(5),n(2),n(16),n(1)],r=u,i="function"==typeof r?r.apply(e,o):r,!(void 0!==i&&(t.exports=i))}(this,function(t,e,n,r,o,i,s){"use strict";var u=s.INIT,a=s.REPLACE,c=s.init,p=s.replace;t.exports={App:e,Page:n,Container:r,events:o,resource:i,actionTypes:{INIT:u,REPLACE:a},actions:{init:c,replace:p}}})},function(t,e,n){var r,o,i;!function(n,s){o=[t],r=s,i="function"==typeof r?r.apply(e,o):r,!(void 0!==i&&(t.exports=i))}(this,function(t){"use strict";t.exports=function(t){return function(e){return function(e){return function(n){if("function"!=typeof n){var r=n.event,o=n.type;t.emit(r||o,n)}return e(n)}}}}})},function(t,e,n){var r,o,i;!function(s,u){o=[e,n(5)],r=u,i="function"==typeof r?r.apply(e,o):r,!(void 0!==i&&(t.exports=i))}(this,function(t,e){"use strict";var n=new e;t.register=function(t,e){return n.register(t,e),this},t.get=function(t){return n.make(t)}})},function(t,e,n){var r,o,i;!function(s,u){o=[t,n(8)],r=u,i="function"==typeof r?r.apply(e,o):r,!(void 0!==i&&(t.exports=i))}(this,function(t,e){"use strict";function n(t){var n=e.createClass({displayName:"AppComponent",getInitialState:function(){var e=this.props,n=e.routes,r=e.router,o=e.app;return this.app=o||new t({routes:n,router:r}),{}},getChildContext:function(){var t=this.app;return{route:function(e){return t.route(e)},loadPage:function(e){return t.loadPage(e)}}},render:function(){return this.props.children}});return n.propTypes={routes:r.arrayOf(r.shape({path:r.string.isRequired,page:r.oneOfType([r.string,r.func]).isRequired})),app:r.instanceOf(t),router:r.object},n.childContextTypes={route:r.func,loadPage:r.func},n}var r=e.PropTypes;t.exports=n})},function(t,e,n){var r,o,i;!function(s,u){o=[t,n(8),n(4)],r=u,i="function"==typeof r?r.apply(e,o):r,!(void 0!==i&&(t.exports=i))}(this,function(t,e,n){"use strict";function r(t){function r(t){var e={};for(var n in t)!s.call(t,n)||n in u.propTypes||(e[n]=t[n]);return e}var u=e.createClass({displayName:"PageComponent",getInitialState:function(){var e=this,n=e.props,r=n.initialState,o=e.page=new t(r);return o.on("*",function(){var t=o.getCurrentEvent().split(/[\-_]/).map(function(t){return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}).join(""),r=n["on"+t];if("function"==typeof r){for(var i=arguments.length,s=Array(i),u=0;u<i;u++)s[u]=arguments[u];r.apply(e,s)}}),{stage:null==r?"INITED":"LOADED",error:null}},componentDidMount:function(){var t=this.handleRequest,e=this.page,n=this.props,r=this.state.stage;"LOADED"!==r&&t(e,n.request)},componentWillReceiveProps:function(t){var e=this.props.request,n=t.request;e!==n&&this.handleRequest(this.page,n)},componentWillUnmount:function(){var t=this.page;t&&t.dispose(),this.page=null},handleRequest:function(t,e){var r=this,o=this[i]=n();this.setState({stage:"LOADING",error:null}),Promise.resolve(t.getInitialState(e)).then(function(e){t.init(e),o===r[i]&&r.setState({stage:"LOADED"})},function(t){o===r[i]&&r.setState({error:t,stage:"LOADED"})})},render:function(){var t=this.page,e=this.props,n=this.state,o=n.error,i=n.stage,s=e.renderLoadingMessage,u=e.renderErrorMessage;return o?u(o):"LOADED"===i?t.createElement(r(e)):s()}});return u.propTypes={initialState:o.object,request:o.object,renderLoadingMessage:o.func,renderErrorMessage:o.func},u.defaultProps={initialState:null,request:{},renderLoadingMessage:function(){return e.createElement("div",null,"loading...")},renderErrorMessage:function(t){return e.createElement("div",null,t.message)}},u}var o=e.PropTypes,i="PAGE_GET_INITIAL_STATE_GUID_ATTR",s=Object.prototype.hasOwnProperty;t.exports=r})},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(p===setTimeout)return setTimeout(t,0);if((p===n||!p)&&setTimeout)return p=setTimeout,setTimeout(t,0);try{return p(t,0)}catch(e){try{return p.call(null,t,0)}catch(e){return p.call(this,t,0)}}}function i(t){if(f===clearTimeout)return clearTimeout(t);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function s(){v&&h&&(v=!1,h.length?d=h.concat(d):y=-1,d.length&&u())}function u(){if(!v){var t=o(s);v=!0;for(var e=d.length;e;){for(h=d,d=[];++y<e;)h&&h[y].run();y=-1,e=d.length}h=null,v=!1,i(t)}}function a(t,e){this.fun=t,this.array=e}function c(){}var p,f,l=t.exports={};!function(){try{p="function"==typeof setTimeout?setTimeout:n}catch(t){p=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(t){f=r}}();var h,d=[],v=!1,y=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new a(t,e)),1!==d.length||v||o(u)},a.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=c,l.addListener=c,l.once=c,l.off=c,l.removeListener=c,l.removeAllListeners=c,l.emit=c,l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(t,e,n){function r(t){return n(o(t))}function o(t){return i[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var i={"./App":9,"./App.js":9,"./Container":5,"./Container.js":5,"./Emitter":6,"./Emitter.js":6,"./Page":10,"./Page.js":10,"./Router":11,"./Router.js":11,"./actionCreator/page":1,"./actionCreator/page.js":1,"./component/Page":12,"./component/Page.js":12,"./env":13,"./env.js":13,"./events":2,"./events.js":2,"./index":14,"./index.js":14,"./middleware/pageActionEventProxy":15,"./middleware/pageActionEventProxy.js":15,"./resource":16,"./resource.js":16,"./util/assign":3,"./util/assign.js":3,"./util/createAppComponent":17,"./util/createAppComponent.js":17,"./util/createPageComponent":18,"./util/createPageComponent.js":18,"./util/guid":4,"./util/guid.js":4,"./util/invariant":7,"./util/invariant.js":7};r.keys=function(){return Object.keys(i)},r.resolve=o,t.exports=r,r.id=20},function(t,n){t.exports=e},function(t,e){t.exports=n}])});